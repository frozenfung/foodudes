<script type='text/javascript'>


//transfer Address to latlng
var geocoder = new google.maps.Geocoder();
function address_to_latlng(){
  var address = document.getElementById('address').value;
  geocoder.geocode(
    {'address': address},
    function(result, status){
      if (status == google.maps.GeocoderStatus.OK){
        alert(result[0].geometry.location);
      }else{

      }
    }
  );
}


// Build markers on Gmap
var map_infos = []; // initialize array
map_infos = gon.map_infos; // receive marker data from controller

function initialize() {
  var mapOptions = {
    zoom: 17,
    center: new google.maps.LatLng(25.026, 121.523)
  };

  var map = new google.maps.Map(document.getElementById('map'),
      mapOptions);

  for(var i = 0; i < gon.map_infos_length; i++){
    var marker = new google.maps.Marker({
      position: {
        lat: map_infos[i]["marker_lat"], 
        lng: map_infos[i]["marker_lng"]
      },
      icon: {
        url: map_infos[i]["marker_icon"],
        size: {width: 30, height: 30}
      },
      title: '<div>'+map_infos[i]["marker_name"]+'</div>',
      map: map
    });
  }
}

google.maps.event.addDomListener(window, 'load', initialize);

</script>